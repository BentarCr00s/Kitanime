extends layout

block content
  // Modern Hero Header Section
  section(class="bg-gradient-to-r from-dark-900 via-dark-800 to-dark-900 py-16 relative overflow-hidden")
    // Background Decorations
    div(class="absolute inset-0 overflow-hidden")
      div(class="absolute top-10 right-10 w-32 h-32 bg-primary-500/20 rounded-full filter blur-3xl")
      div(class="absolute bottom-10 left-10 w-24 h-24 bg-accent-500/20 rounded-full filter blur-2xl")
    
    div(class="container mx-auto px-6 relative z-10")
      div(class="text-center")
        div(class="inline-flex items-center px-4 py-2 bg-primary-600/20 text-primary-400 rounded-full text-sm font-medium mb-6 border border-primary-600/30")
          svg(class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24")
            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
          span Download Batch
        h1(class="text-4xl md:text-6xl font-black text-white mb-4")
          span(class="gradient-text") Download Batch
        p(class="text-xl text-gray-300 max-w-2xl mx-auto leading-relaxed") Download anime favorit Anda dalam format batch dengan kualitas tinggi dan subtitle Indonesia

  // Main Content
  div(class="container mx-auto px-6 py-12")
    div(class="grid grid-cols-1 xl:grid-cols-4 gap-12")
      div(class="xl:col-span-3")
        // Breadcrumb Navigation
        nav(class="mb-8")
          ol(class="flex items-center space-x-2 text-sm text-gray-400")
            li: a(href="/" class="hover:text-primary-400 transition-colors") Beranda
            li: span(class="text-gray-600") /
            li: a(href=`/anime/${anime.slug}` class="hover:text-primary-400 transition-colors")= anime.title
            li: span(class="text-gray-600") /
            li(class="text-primary-400 font-medium") Download Batch

        // Anime Info Card
        div(class="anime-card rounded-2xl p-8 mb-8")
          div(class="flex items-start space-x-6")
            img(src=anime.poster alt=anime.title class="w-32 h-40 object-cover rounded-xl flex-shrink-0 shadow-lg")
            div(class="flex-1")
              h1(class="text-2xl md:text-3xl font-bold text-white mb-3")= `Download Batch ${anime.title}`
              if anime.synopsis
                p(class="text-gray-300 text-sm leading-relaxed line-clamp-3 mb-4")= anime.synopsis
              div(class="flex items-center space-x-4")
                a(href=`/anime/${anime.slug}` class="btn-modern px-6 py-3 bg-primary-600 text-white rounded-xl hover:bg-primary-700 transition-all")
                  svg(class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                    path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18")
                  span Kembali ke Detail

        // Download Links Section
        if batchLinks && batchLinks.length > 0
          div(class="anime-card rounded-2xl p-8 mb-8")
            h2(class="text-2xl font-bold text-white mb-6 flex items-center")
              svg(class="w-6 h-6 mr-3 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
              span Link Download Batch
            div(class="space-y-6")
              each link in batchLinks
                div(class="border border-dark-700/50 rounded-xl p-6 hover:border-primary-500/30 transition-all duration-300 bg-dark-800/30")
                  div(class="flex items-center justify-between mb-4")
                    h3(class="font-semibold text-white text-lg")= link.quality || "Download Batch"
                    if link.size
                      span(class="px-3 py-1 bg-primary-600/20 text-primary-400 text-sm rounded-full border border-primary-600/30")= link.size
                  
                  if link.description
                    p(class="text-gray-300 text-sm mb-4")= link.description
                  
                  div(class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")
                    if link.links && link.links.length > 0
                      each downloadLink in link.links
                        a(href=downloadLink.url target="_blank" rel="noopener noreferrer" class="group flex items-center justify-between p-4 bg-dark-700/50 rounded-xl hover:bg-primary-600/20 hover:border-primary-500/30 transition-all duration-300 border border-dark-600/50")
                          div(class="flex items-center")
                            svg(class="w-5 h-5 mr-3 text-primary-400 group-hover:text-primary-300 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
                            span(class="font-medium text-white group-hover:text-primary-300 transition-colors")= downloadLink.provider || "Download"
                          svg(class="w-4 h-4 text-gray-400 group-hover:text-primary-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14")
                    else
                      a(href=link.url target="_blank" rel="noopener noreferrer" class="group flex items-center justify-between p-4 bg-dark-700/50 rounded-xl hover:bg-primary-600/20 hover:border-primary-500/30 transition-all duration-300 border border-dark-600/50")
                        div(class="flex items-center")
                          svg(class="w-5 h-5 mr-3 text-primary-400 group-hover:text-primary-300 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
                          span(class="font-medium text-white group-hover:text-primary-300 transition-colors") Download Batch
                        svg(class="w-4 h-4 text-gray-400 group-hover:text-primary-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                          path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14")

        else
          // Empty State
          div(class="anime-card rounded-2xl p-12 mb-8 text-center")
            svg(class="w-20 h-20 text-gray-500 mx-auto mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
            h3(class="text-2xl font-bold text-white mb-3") Belum ada link download
            p(class="text-gray-400 text-lg") Link download batch untuk anime ini belum tersedia

        // Download Instructions
        div(class="anime-card rounded-2xl p-8 mb-8 border-l-4 border-l-primary-500")
          h3(class="text-xl font-bold text-white mb-6 flex items-center")
            svg(class="w-6 h-6 mr-3 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z")
            span Cara Download
          div(class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300")
            div(class="flex items-start space-x-3")
              span(class="flex-shrink-0 w-6 h-6 bg-primary-600 text-white rounded-full flex items-center justify-center text-xs font-bold") 1
              span Klik link download yang tersedia
            div(class="flex items-start space-x-3")
              span(class="flex-shrink-0 w-6 h-6 bg-primary-600 text-white rounded-full flex items-center justify-center text-xs font-bold") 2
              span Tunggu beberapa detik hingga muncul tombol download
            div(class="flex items-start space-x-3")
              span(class="flex-shrink-0 w-6 h-6 bg-primary-600 text-white rounded-full flex items-center justify-center text-xs font-bold") 3
              span Klik tombol download untuk memulai unduhan
            div(class="flex items-start space-x-3")
              span(class="flex-shrink-0 w-6 h-6 bg-primary-600 text-white rounded-full flex items-center justify-center text-xs font-bold") 4
              span Ekstrak file yang sudah didownload menggunakan WinRAR atau 7-Zip

        // Ad Slots
        if adSlots && adSlots.contentBottom && adSlots.contentBottom.length > 0
          div(class="mb-8")
            each ad in adSlots.contentBottom
              div(class="ad-slot bg-dark-800/50 rounded-xl border border-dark-700/50")!= ad.content

      // Sidebar
      div(class="xl:col-span-1")
        // Top Ads
        if adSlots && adSlots.sidebarTop && adSlots.sidebarTop.length > 0
          div(class="mb-8")
            each ad in adSlots.sidebarTop
              div(class="ad-slot bg-dark-800/50 rounded-xl border border-dark-700/50")!= ad.content

        // Download Info Card
        div(class="anime-card rounded-2xl p-6 mb-8")
          h3(class="text-xl font-bold text-white mb-6 flex items-center")
            svg(class="w-5 h-5 mr-3 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z")
            span Informasi Download
          div(class="space-y-4 text-sm")
            div(class="flex justify-between items-center py-2 border-b border-dark-700/30")
              span(class="font-medium text-gray-300") Format:
              span(class="text-white") MP4/MKV
            div(class="flex justify-between items-center py-2 border-b border-dark-700/30")
              span(class="font-medium text-gray-300") Subtitle:
              span(class="text-white") Indonesia
            div(class="flex justify-between items-center py-2 border-b border-dark-700/30")
              span(class="font-medium text-gray-300") Kualitas:
              span(class="text-white") 480p, 720p, 1080p
            div(class="flex justify-between items-center py-2")
              span(class="font-medium text-gray-300") Audio:
              span(class="text-white") Japanese

        // Quick Actions
        div(class="anime-card rounded-2xl p-6 mb-8")
          h3(class="text-xl font-bold text-white mb-6 flex items-center")
            svg(class="w-5 h-5 mr-3 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16")
            span Aksi Lainnya
          div(class="space-y-3")
            a(href=`/anime/${anime.slug}` class="flex items-center p-3 text-gray-300 hover:text-white hover:bg-dark-700/50 rounded-xl transition-all group")
              svg(class="w-5 h-5 mr-3 text-primary-400 group-hover:text-primary-300 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z")
              span Detail Anime
            a(href=`/anime/${anime.slug}/episodes` class="flex items-center p-3 text-gray-300 hover:text-white hover:bg-dark-700/50 rounded-xl transition-all group")
              svg(class="w-5 h-5 mr-3 text-primary-400 group-hover:text-primary-300 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z")
              span Streaming Online

        // Download Tips
        div(class="anime-card rounded-2xl p-6 mb-8 border-l-4 border-l-yellow-500")
          h3(class="text-xl font-bold text-white mb-6 flex items-center")
            svg(class="w-5 h-5 mr-3 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z")
            span Tips Download
          div(class="space-y-3 text-sm text-gray-300")
            div(class="flex items-start space-x-2")
              span(class="text-yellow-400 mt-1") •
              span Gunakan koneksi internet yang stabil
            div(class="flex items-start space-x-2")
              span(class="text-yellow-400 mt-1") •
              span Pastikan ruang penyimpanan cukup
            div(class="flex items-start space-x-2")
              span(class="text-yellow-400 mt-1") •
              span Gunakan download manager untuk file besar
            div(class="flex items-start space-x-2")
              span(class="text-yellow-400 mt-1") •
              span Scan file dengan antivirus setelah download

        // Bottom Ads
        if adSlots && adSlots.sidebarBottom && adSlots.sidebarBottom.length > 0
          div(class="mb-8")
            each ad in adSlots.sidebarBottom
              div(class="ad-slot bg-dark-800/50 rounded-xl border border-dark-700/50")!= ad.content
